:root{
  --bg:#0b0e14;
  --panel:#121827;
  --panel2:#0f1422;
  --text:#e9edf6;
  --muted:#9aa6bf;
  --line:#232c44;
  --accent:#6ea8fe;
  --radius:16px;
  --shadow: 0 10px 30px rgba(0,0,0,.35);

  --optA: rgba(110,168,254,.22);
  --optB: rgba(130,87,229,.22);
  --optC: rgba(50,205,180,.20);
  --optD: rgba(255,196,61,.20);
  --optE: rgba(255,107,107,.18);
  --optF: rgba(150,220,100,.18);
  --optG: rgba(255,140,0,.18);
  --optH: rgba(180,180,255,.18);
}

*{box-sizing:border-box}
html,body{height:100%}
html{background:var(--bg);color:var(--text)}

body{
  margin:0;
  min-height:100svh;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: transparent;
  color:var(--text);
  position: relative;
  overflow-x: hidden;
}

/* fixed continuous background (no seam) */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 600px at 10% 0%, rgba(110,168,254,.18), transparent 55%),
    radial-gradient(800px 500px at 90% 20%, rgba(130,87,229,.16), transparent 55%),
    var(--bg);
  background-repeat: no-repeat;
  background-size: cover;
}
body::after{
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
}

.wrap{max-width:1100px;margin:0 auto;padding:16px}

.topbar{
  position:sticky; top:0; z-index:10;
  background:rgba(11,14,20,.72);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom:1px solid var(--line);
}
.topbar-inner{display:flex;justify-content:space-between;align-items:center;gap:12px}
.title{font-weight:800;font-size:18px;letter-spacing:.2px}
.sub{color:var(--muted);font-size:12px;margin-top:2px}

.meta{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.badge{
  font-size:12px;color:var(--muted);
  padding:8px 10px;border:1px solid var(--line);
  border-radius:999px;background:rgba(18,24,39,.55)
}
.btn{
  border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
  color:var(--text);
  padding:9px 12px;border-radius:12px;
  cursor:pointer;
}
.btn:hover{border-color:rgba(110,168,254,.5)}
.btn:disabled{opacity:.65;cursor:not-allowed}
.btn.ghost{background:transparent}

.grid{display:grid;grid-template-columns:360px 1fr;gap:16px;align-items:start}
@media (max-width:980px){.grid{grid-template-columns:1fr}}

.card{
  background: linear-gradient(180deg, rgba(18,24,39,.92), rgba(15,20,34,.92));
  border:1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.card-head{
  padding:14px 16px;
  display:flex;align-items:baseline;justify-content:space-between;gap:10px;
  border-bottom:1px solid var(--line);
}
.card-head h2{margin:0;font-size:14px}
.muted{color:var(--muted);font-size:12px}
.card-body{padding:14px 16px}
.hint{margin-top:10px;color:var(--muted);font-size:12px;line-height:1.4}

.side details > summary{list-style:none;cursor:pointer}
.side summary::-webkit-details-marker{display:none}

.split{display:grid;grid-template-columns:1fr 1.1fr;gap:14px}
@media (max-width:720px){.split{grid-template-columns:1fr}}

.table-wrap{
  overflow:auto;
  border-radius:12px;
  border:1px solid var(--line);
  background:rgba(15,20,34,.55)
}
.table{width:100%;border-collapse:collapse;min-width:0}
.table th,.table td{
  padding:10px 12px;
  border-bottom:1px solid rgba(35,44,68,.7);
  font-size:13px
}
.table thead th{
  position:sticky; top:0;
  background:rgba(18,24,39,.95);
  text-align:left
}
.table td.num,.table th.num{text-align:right}
.table tbody tr:hover{background:rgba(110,168,254,.06)}
.table tfoot th,.table tfoot td{font-weight:800;background:rgba(18,24,39,.65)}
.table tfoot tr{border-top:1px solid var(--line)}

/* ===== Respondents ===== */
.table-respondents{table-layout:fixed;width:100%}
.table-respondents thead th{white-space:nowrap}
.table-respondents tbody td{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* âœ… width balance update: Name wider, Lang narrower */
.table-respondents th:nth-child(1),
.table-respondents td:nth-child(1){
  width:4.6ch;text-align:right;font-variant-numeric:tabular-nums;padding-left:8px;padding-right:8px
}

/* Name gets more room (main change) */
.table-respondents th:nth-child(2),
.table-respondents td:nth-child(2){
  width:auto;
}

/* Lang narrower */
.table-respondents th:nth-child(3),
.table-respondents td:nth-child(3){
  width:5.6ch;
  padding-left:6px;
  padding-right:6px;
  text-align:left;
}

/* Q columns compact */
.table-respondents th:nth-child(4),
.table-respondents td:nth-child(4),
.table-respondents th:nth-child(5),
.table-respondents td:nth-child(5),
.table-respondents th:nth-child(6),
.table-respondents td:nth-child(6){
  width:6.4ch;
  text-align:center;
  padding-left:6px;
  padding-right:6px;
}

/* Name: link-like */
.table-respondents td:nth-child(2){
  cursor:pointer;
  text-decoration: underline;
  text-decoration-color: rgba(110,168,254,.55);
  text-underline-offset: 3px;
  text-decoration-thickness: 1px;
}
.table-respondents tbody tr:hover td:nth-child(2){
  text-decoration-color: rgba(110,168,254,.95);
}
.table-respondents td:nth-child(2):active{opacity:.85}

/* filter row */
.tr-filters th{
  background: rgba(18,24,39,.95);
  padding: 6px 6px;
}

/* iOS-friendly select */
.filter-select{
  width:100%;
  min-height:36px;
  padding:6px 10px;
  font-size:13px;
  line-height:1.4;
  color:var(--text);
  background:rgba(15,20,34,.85);
  border:1px solid rgba(35,44,68,.9);
  border-radius:10px;
  outline:none;
  appearance:none;
  -webkit-appearance:none;
  background-image:
    linear-gradient(45deg, transparent 50%, #9aa6bf 50%),
    linear-gradient(135deg, #9aa6bf 50%, transparent 50%);
  background-position:
    calc(100% - 14px) 14px,
    calc(100% - 9px) 14px;
  background-size:5px 5px;
  background-repeat:no-repeat;
}
.filter-select:focus{
  border-color: rgba(110,168,254,.55);
  box-shadow: 0 0 0 2px rgba(110,168,254,.10);
}

/* filter pills */
.filters-bar{display:flex;gap:8px;flex-wrap:wrap;margin:0 0 10px}
.pill{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;
  border:1px solid rgba(35,44,68,.9);
  background:rgba(15,20,34,.60);
  font-size:12px;color:var(--text);
}
.pill .k{color:var(--muted)}
.pill .x{
  border:none;background:transparent;color:var(--muted);
  cursor:pointer;padding:0;font-size:14px;line-height:1;
}
.pill .x:hover{color:var(--text)}

/* option badge */
.opt{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:2.2em;padding:4px 7px;border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  font-weight:800;letter-spacing:.3px;font-size:12px;line-height:1;
  user-select:none;
}
.opt.is-empty{opacity:.6;font-weight:700}
.opt-A{background:var(--optA)}
.opt-B{background:var(--optB)}
.opt-C{background:var(--optC)}
.opt-D{background:var(--optD)}
.opt-E{background:var(--optE)}
.opt-F{background:var(--optF)}
.opt-G{background:var(--optG)}
.opt-H{background:var(--optH)}

.chart-wrap{
  border:1px solid var(--line);
  border-radius:12px;
  background:rgba(15,20,34,.55);
  padding:10px;
  min-height:260px;
  display:flex;
}
.chart-wrap canvas{width:100% !important;height:100% !important}

.footer{margin:14px 0 30px;display:flex;justify-content:flex-end}

@media (max-width:520px){
  .wrap{padding:12px}
  .title{font-size:17px}
  .badge{padding:7px 9px}
  .btn{padding:8px 11px}
  .table th,.table td{padding:8px 8px;font-size:12px}

  @supports (-webkit-touch-callout:none){
    .table-respondents td:nth-child(2){font-size:11px}
  }

  .filter-select{
    min-height:34px;
    padding:6px 9px;
    font-size:12px;
    background-position:
      calc(100% - 14px) 13px,
      calc(100% - 9px) 13px;
  }
  .opt{min-width:2.1em;padding:4px 6px}
}

/* dialog */
.dialog{
  border:1px solid var(--line);
  border-radius:14px;
  background: rgba(18,24,39,.98);
  color: var(--text);
  width: min(520px, 92vw);
  padding:0;
  box-shadow: var(--shadow);
}
.dialog::backdrop{background:rgba(0,0,0,.55)}
.dialog-head{
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 12px;border-bottom:1px solid var(--line);
}
.dialog-title{font-weight:800;font-size:14px}
.dialog-close{padding:7px 10px}
.dialog-body{
  padding:12px 12px 14px;
  line-height:1.5;
  word-break:break-word;
  white-space:pre-wrap;
}

/* print */
@media print{
  body::before, body::after { display:none !important; }
  .topbar,.btn{display:none !important}
  body{background:#fff !important;color:#000}
  html{background:#fff !important}
  .card{box-shadow:none;border:1px solid #ddd}
  .table-wrap{border:1px solid #ddd}
  dialog{display:none !important;}
  .filters-bar{display:none !important;}
  .tr-filters{display:none !important;}
}
